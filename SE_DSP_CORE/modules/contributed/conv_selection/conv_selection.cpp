//Convolution selection - by Xhun Audio

#include ".\conv_selection.h"

REGISTER_PLUGIN ( conv_selection, L"XA Convolve Selection" );

conv_selection::conv_selection( IMpUnknown* host ) : MpBase( host )
{
	// Register pins.
	initializePin( 0, pinSignalIn );
	initializePin( 1, pinSignalOut );
	initializePin( 2, pinCoeffSel );
	
	IOTA = 0;
	for (int i=0; i<512; i++)
		fVec0[i] = 0;
}

void conv_selection::subProcess1( int bufferOffset, int sampleFrames )
{
	// get pointers to in/output buffers.
	float* input0	= bufferOffset + pinSignalIn.getBuffer();
	float* output0	= bufferOffset + pinSignalOut.getBuffer();

	for( int s = sampleFrames; s > 0; --s )
	{
		fVec0[IOTA&255] = *input0;
		*output0 = (((0.030976f * fVec0[(IOTA-1)&255]) + ((0.109378f * fVec0[(IOTA-2)&255]) + ((0.006012f * fVec0[(IOTA-3)&255]) + ((0.207984f * fVec0[(IOTA-7)&255]) + ((0.547838f * fVec0[(IOTA-8)&255]) + ((0.920011f * fVec0[(IOTA-9)&255]) + ((0.999939f * fVec0[(IOTA-10)&255]) + ((0.734794f * fVec0[(IOTA-11)&255]) + ((0.318094f * fVec0[(IOTA-12)&255]) + ((0.051119f * fVec0[(IOTA-21)&255]) + ((0.215491f * fVec0[(IOTA-22)&255]) + ((0.311686f * fVec0[(IOTA-23)&255]) + ((0.299661f * fVec0[(IOTA-24)&255]) + ((0.225227f * fVec0[(IOTA-25)&255]) + ((0.076601f * fVec0[(IOTA-26)&255]) + ((0.102695f * fVec0[(IOTA-36)&255]) + ((0.140996f * fVec0[(IOTA-37)&255]) + ((0.088382f * fVec0[(IOTA-38)&255]) + ((0.030732f * fVec0[(IOTA-39)&255]) + ((0.016205f * fVec0[(IOTA-50)&255]) + ((0.036225f * fVec0[(IOTA-51)&255]) + ((0.00882f * fVec0[(IOTA-52)&255]) + ((0.030061f * fVec0[(IOTA-58)&255]) + ((0.05594f * fVec0[(IOTA-59)&255]) + ((0.047578f * fVec0[(IOTA-60)&255]) + ((0.019898f * fVec0[(IOTA-61)&255]) + ((0.015107f * fVec0[(IOTA-65)&255]) + ((0.040986f * fVec0[(IOTA-66)&255]) + ((0.021729f * fVec0[(IOTA-67)&255]) + ((0.037294f * fVec0[(IOTA-78)&255]) + ((0.06711f * fVec0[(IOTA-79)&255]) + ((0.054781f * fVec0[(IOTA-80)&255]) + ((0.011017f * fVec0[(IOTA-81)&255]) + ((0.000153f * fVec0[(IOTA-88)&255]) + ((0.004334f * fVec0[(IOTA-89)&255]) + ((0.011078f * fVec0[(IOTA-90)&255]) + ((0.005219f * fVec0[(IOTA-91)&255]) + ((0.025971f * fVec0[(IOTA-100)&255]) + ((0.060091f * fVec0[(IOTA-101)&255]) + ((0.065706f * fVec0[(IOTA-102)&255]) + ((0.035859f * fVec0[(IOTA-103)&255]) + ((0.025056f * fVec0[(IOTA-108)&255]) + ((0.044649f * fVec0[(IOTA-109)&255]) + ((0.033937f * fVec0[(IOTA-110)&255]) + ((0.009674f * fVec0[(IOTA-111)&255]) + ((0.010712f * fVec0[(IOTA-119)&255]) + ((0.022217f * fVec0[(IOTA-120)&255]) + ((0.028718f * fVec0[(IOTA-121)&255]) + ((0.027955f * fVec0[(IOTA-122)&255]) + ((0.017975f * fVec0[(IOTA-123)&255]) + ((0.005036f * fVec0[(IOTA-124)&255]) + ((0.003754f * fVec0[(IOTA-125)&255]) + ((0.014496f * fVec0[(IOTA-126)&255]) + ((0.024751f * fVec0[(IOTA-127)&255]) + ((0.023835f * fVec0[(IOTA-128)&255]) + ((0.002472f * fVec0[(IOTA-130)&255]) + (0.011261f * fVec0[(IOTA-129)&255]))))))))))))))))))))))))))))))))))))))))))))))))))))))))) - ((0.33723f * fVec0[(IOTA-4)&255]) + ((0.514481f * fVec0[(IOTA-5)&255]) + ((0.204169f * fVec0[(IOTA-6)&255]) + ((0.230903f * fVec0[(IOTA-13)&255]) + ((0.595691f * fVec0[(IOTA-14)&255]) + ((0.616474f * fVec0[(IOTA-15)&255]) + ((0.482009f * fVec0[(IOTA-16)&255]) + ((0.26307f * fVec0[(IOTA-17)&255]) + ((0.139012f * fVec0[(IOTA-18)&255]) + ((0.149388f * fVec0[(IOTA-19)&255]) + ((0.096164f * fVec0[(IOTA-20)&255]) + ((0.06534f * fVec0[(IOTA-27)&255]) + ((0.101932f * fVec0[(IOTA-28)&255]) + ((0.106693f * fVec0[(IOTA-29)&255]) + ((0.087222f * fVec0[(IOTA-30)&255]) + ((0.063295f * fVec0[(IOTA-31)&255]) + ((0.109104f * fVec0[(IOTA-32)&255]) + ((0.152135f * fVec0[(IOTA-33)&255]) + ((0.106876f * fVec0[(IOTA-34)&255]) + ((0.005524f * fVec0[(IOTA-35)&255]) + ((0.010041f * fVec0[(IOTA-40)&255]) + ((0.038911f * fVec0[(IOTA-41)&255]) + ((0.05707f * fVec0[(IOTA-42)&255]) + ((0.072146f * fVec0[(IOTA-43)&255]) + ((0.079348f * fVec0[(IOTA-44)&255]) + ((0.09714f * fVec0[(IOTA-45)&255]) + ((0.108646f * fVec0[(IOTA-46)&255]) + ((0.079073f * fVec0[(IOTA-47)&255]) + ((0.054567f * fVec0[(IOTA-48)&255]) + ((0.035646f * fVec0[(IOTA-49)&255]) + ((0.024415f * fVec0[(IOTA-53)&255]) + ((0.041597f * fVec0[(IOTA-54)&255]) + ((0.05356f * fVec0[(IOTA-55)&255]) + ((0.067598f * fVec0[(IOTA-56)&255]) + ((0.035981f * fVec0[(IOTA-57)&255]) + ((0.020905f * fVec0[(IOTA-62)&255]) + ((0.033448f * fVec0[(IOTA-63)&255]) + ((0.015839f * fVec0[(IOTA-64)&255]) + ((0.026093f * fVec0[(IOTA-68)&255]) + ((0.060305f * fVec0[(IOTA-69)&255]) + ((0.057466f * fVec0[(IOTA-70)&255]) + ((0.039277f * fVec0[(IOTA-71)&255]) + ((0.035096f * fVec0[(IOTA-72)&255]) + ((0.032899f * fVec0[(IOTA-73)&255]) + ((0.034761f * fVec0[(IOTA-74)&255]) + ((0.050966f * fVec0[(IOTA-75)&255]) + ((0.040407f * fVec0[(IOTA-76)&255]) + ((0.000458f * fVec0[(IOTA-77)&255]) + ((0.028169f * fVec0[(IOTA-82)&255]) + ((0.068178f * fVec0[(IOTA-83)&255]) + ((0.078066f * fVec0[(IOTA-84)&255]) + ((0.047365f * fVec0[(IOTA-85)&255]) + ((0.030061f * fVec0[(IOTA-86)&255]) + ((0.016144f * fVec0[(IOTA-87)&255]) + ((0.008972f * fVec0[(IOTA-92)&255]) + ((0.014161f * fVec0[(IOTA-93)&255]) + ((0.033052f * fVec0[(IOTA-94)&255]) + ((0.055635f * fVec0[(IOTA-95)&255]) + ((0.057222f * fVec0[(IOTA-96)&255]) + ((0.052095f * fVec0[(IOTA-97)&255]) + ((0.039766f * fVec0[(IOTA-98)&255]) + ((0.011444f * fVec0[(IOTA-99)&255]) + ((0.007599f * fVec0[(IOTA-104)&255]) + ((0.041383f * fVec0[(IOTA-105)&255]) + ((0.0477f * fVec0[(IOTA-106)&255]) + ((0.018097f * fVec0[(IOTA-107)&255]) + ((0.024903f * fVec0[(IOTA-112)&255]) + ((0.061037f * fVec0[(IOTA-113)&255]) + ((0.077914f * fVec0[(IOTA-114)&255]) + ((0.070864f * fVec0[(IOTA-115)&255]) + ((0.051607f * fVec0[(IOTA-116)&255]) + ((0.006439f * fVec0[(IOTA-118)&255]) + (0.02884f * fVec0[(IOTA-117)&255]))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))));

		// post processing
		IOTA = IOTA+1;

		// Increment buffer pointers.
		++input0;
		++output0;
	}
}

void conv_selection::subProcess2( int bufferOffset, int sampleFrames )
{
	// get pointers to in/output buffers.
	float* input0	= bufferOffset + pinSignalIn.getBuffer();
	float* output0	= bufferOffset + pinSignalOut.getBuffer();

	for( int s = sampleFrames; s > 0; --s )
	{
		fVec0[IOTA&255] = *input0;
		*output0 = (((0.000824f * fVec0[(IOTA-142)&255]) + (0.005402f * fVec0[(IOTA-141)&255])) + (0.016419f * (((((((((((((((((((((((((((((((fVec0[(IOTA-134)&255] + (((((fVec0[(IOTA-140)&255] + (1.5631889883671357f * fVec0[(IOTA-139)&255])) + (1.416346915159267f * fVec0[(IOTA-138)&255])) + (0.7787928619282538f * fVec0[(IOTA-137)&255])) + (0.21188866557037578f * fVec0[(IOTA-136)&255])) + (0.28808088190510994f * fVec0[(IOTA-135)&255]))) + (1.6264084292587855f * fVec0[(IOTA-133)&255])) + (1.7881113344296242f * fVec0[(IOTA-132)&255])) + (1.5352944759120533f * fVec0[(IOTA-131)&255])) + (0.9943967354893721f * fVec0[(IOTA-130)&255])) + (0.2007430415981485f * fVec0[(IOTA-129)&255])) + (0.27882331445276815f * fVec0[(IOTA-121)&255])) + (1.7508983494731714f * fVec0[(IOTA-120)&255])) + (2.656130093184725f * fVec0[(IOTA-119)&255])) + (2.278823314452768f * fVec0[(IOTA-118)&255])) + (0.2490407454778001f * fVec0[(IOTA-117)&255])) + (0.009318472501370365f * fVec0[(IOTA-113)&255])) + (2.4293805956513794f * fVec0[(IOTA-112)&255])) + (4.022291247944455f * fVec0[(IOTA-111)&255])) + (3.7453559900115723f * fVec0[(IOTA-110)&255])) + (1.9238077836652656f * fVec0[(IOTA-109)&255])) + (0.3624459467689871f * fVec0[(IOTA-99)&255])) + (0.682136549119922f * fVec0[(IOTA-98)&255])) + (0.29922650587733723f * fVec0[(IOTA-97)&255])) + (0.09848346427918875f * fVec0[(IOTA-96)&255])) + (1.0613313843717644f * fVec0[(IOTA-88)&255])) + (3.4944271880138866f * fVec0[(IOTA-87)&255])) + (4.089225896826847f * fVec0[(IOTA-86)&255])) + (2.4869967720324015f * fVec0[(IOTA-85)&255])) + (0.3921676106949266f * fVec0[(IOTA-84)&255])) + (1.1598757536999817f * fVec0[(IOTA-73)&255])) + (2.5111760764967412f * fVec0[(IOTA-72)&255])) + (1.4200621231500092f * fVec0[(IOTA-71)&255])) + (2.001827151470857f * fVec0[(IOTA-66)&255])) + (3.1375236007064986f * ((((((((((((((((((((fVec0[(IOTA-42)&255] + (((((fVec0[(IOTA-65)&255] + (1.0639813646510725f * fVec0[(IOTA-64)&255])) + (0.45260603707657965f * fVec0[(IOTA-63)&255])) + (0.5278462583713481f * fVec0[(IOTA-56)&255])) + (0.6724060953120451f * fVec0[(IOTA-55)&255])) + (0.17416286518489763f * fVec0[(IOTA-43)&255]))) + (2.1510822090653208f * fVec0[(IOTA-41)&255])) + (2.7511986799961177f * fVec0[(IOTA-40)&255])) + (1.6895855576045813f * fVec0[(IOTA-39)&255])) + (2.3975152868096674f * fVec0[(IOTA-28)&255])) + (4.754770455207221f * fVec0[(IOTA-27)&255])) + (5.914122100359119f * fVec0[(IOTA-26)&255])) + (6.027875376104048f * fVec0[(IOTA-25)&255])) + (4.325264486072018f * fVec0[(IOTA-24)&255])) + (1.4158788702319713f * fVec0[(IOTA-23)&255])) + (6.722197418227701f * fVec0[(IOTA-13)&255])) + (14.095447927788022f * fVec0[(IOTA-12)&255])) + (19.09073085509075f * fVec0[(IOTA-11)&255])) + (18.80339706881491f * fVec0[(IOTA-10)&255])) + (12.649344851014268f * fVec0[(IOTA-9)&255])) + (6.298612054741338f * fVec0[(IOTA-8)&255])) + (1.161739299233233f * fVec0[(IOTA-3)&255])) + (1.9490633795981753f * fVec0[(IOTA-2)&255])) + (0.5177715228574201f * fVec0[(IOTA-1)&255])) - ((((((((((((((((((((((((((((((((((((((((0.7423080656119577f * fVec0[(IOTA-62)&255]) + (1.3134038629525382f * fVec0[(IOTA-61)&255])) + (1.0799767058138405f * fVec0[(IOTA-60)&255])) + (0.8477530816267107f * fVec0[(IOTA-59)&255])) + (0.603668834320101f * fVec0[(IOTA-58)&255])) + (0.08886732019800057f * fVec0[(IOTA-57)&255])) + (0.09657381345239252f * fVec0[(IOTA-54)&255])) + (0.872037270697855f * fVec0[(IOTA-53)&255])) + (1.1202756478695526f * fVec0[(IOTA-52)&255])) + (1.6380471707269728f * fVec0[(IOTA-51)&255])) + (2.1226438901290887f * fVec0[(IOTA-50)&255])) + (1.8927885082014948f * fVec0[(IOTA-49)&255])) + (1.5604387071726682f * fVec0[(IOTA-48)&255])) + (1.434844220130059f * fVec0[(IOTA-47)&255])) + (1.1925458604290013f * fVec0[(IOTA-46)&255])) + (0.8880326118606232f * fVec0[(IOTA-45)&255])) + (0.46741725710957976f * fVec0[(IOTA-44)&255])) + (0.3015432398330583f * fVec0[(IOTA-38)&255])) + (2.0835484810249443f * fVec0[(IOTA-37)&255])) + (2.9502475007279436f * fVec0[(IOTA-36)&255])) + (2.3264291953799865f * fVec0[(IOTA-35)&255])) + (1.3128020964767544f * fVec0[(IOTA-34)&255])) + (1.4662331359798118f * fVec0[(IOTA-33)&255])) + (2.015412986508784f * fVec0[(IOTA-32)&255])) + (2.0284383189362325f * fVec0[(IOTA-31)&255])) + (1.859011938270407f * fVec0[(IOTA-30)&255])) + (0.500592060564884f * fVec0[(IOTA-29)&255])) + (1.3554498689702028f * fVec0[(IOTA-22)&255])) + (2.8483548481024945f * fVec0[(IOTA-21)&255])) + (2.6694360865767255f * fVec0[(IOTA-20)&255])) + (3.549781617004756f * fVec0[(IOTA-19)&255])) + (7.132136270989033f * fVec0[(IOTA-18)&255])) + (10.598388818790644f * fVec0[(IOTA-17)&255])) + (12.317596816461226f * fVec0[(IOTA-16)&255])) + (10.656449577792875f * fVec0[(IOTA-15)&255])) + (3.043268950791032f * fVec0[(IOTA-14)&255])) + (0.22927302727360965f * fVec0[(IOTA-7)&255])) + (7.82409007085315f * fVec0[(IOTA-6)&255])) + (9.677181403474718f * fVec0[(IOTA-5)&255])) + (4.20559060467825f * fVec0[(IOTA-4)&255]))))) - ((((((((((((((((((((((((((((((((((((((((0.9144893111638955f * fVec0[(IOTA-128)&255]) + (2.2081734575796332f * fVec0[(IOTA-127)&255])) + (3.4534989950666914f * fVec0[(IOTA-126)&255])) + (4.453498995066692f * fVec0[(IOTA-125)&255])) + (4.724891893537974f * fVec0[(IOTA-124)&255])) + (3.7286071015287168f * fVec0[(IOTA-123)&255])) + (1.7248918935379742f * fVec0[(IOTA-122)&255])) + (2.0984834642791887f * fVec0[(IOTA-116)&255])) + (3.022291247944455f * fVec0[(IOTA-115)&255])) + (2.1003715207990745f * fVec0[(IOTA-114)&255])) + (0.21560387356111824f * fVec0[(IOTA-108)&255])) + (1.9869663195078873f * fVec0[(IOTA-107)&255])) + (2.988854376027773f * fVec0[(IOTA-106)&255])) + (3.3419818502953893f * fVec0[(IOTA-105)&255])) + (3.5706194043486206f * fVec0[(IOTA-104)&255])) + (3.007430415981485f * fVec0[(IOTA-103)&255])) + (1.5631889883671357f * fVec0[(IOTA-102)&255])) + (0.7787928619282538f * fVec0[(IOTA-101)&255])) + (0.4776782995310311f * fVec0[(IOTA-100)&255])) + (0.6468116206833546f * fVec0[(IOTA-95)&255])) + (1.6040562762653023f * fVec0[(IOTA-94)&255])) + (2.247213594006943f * fVec0[(IOTA-93)&255])) + (3.8531579267921314f * fVec0[(IOTA-92)&255])) + (4.923807783665266f * fVec0[(IOTA-91)&255])) + (3.4349229551129787f * fVec0[(IOTA-90)&255])) + (1.165418113161581f * fVec0[(IOTA-89)&255])) + (1.9033436871916682f * fVec0[(IOTA-83)&255])) + (3.1895974176259214f * fVec0[(IOTA-82)&255])) + (2.527864059930568f * fVec0[(IOTA-81)&255])) + (1.9200925756745233f * fVec0[(IOTA-80)&255])) + (2.1115171447713017f * fVec0[(IOTA-79)&255])) + (2.1375236007064986f * fVec0[(IOTA-78)&255])) + (2.6226932212680434f * fVec0[(IOTA-77)&255])) + (3.6784213411291797f * fVec0[(IOTA-76)&255])) + (3.5575857238565076f * fVec0[(IOTA-75)&255])) + (1.5650770448870213f * fVec0[(IOTA-74)&255])) + (0.45727510810646205f * fVec0[(IOTA-70)&255])) + (1.747183141482429f * fVec0[(IOTA-69)&255])) + (1.9479261830805772f * fVec0[(IOTA-68)&255])) + (0.2341799135148304f * fVec0[(IOTA-67)&255])))));

		// post processing
		IOTA = IOTA+1;

		// Increment buffer pointers.
		++input0;
		++output0;
	}
}

void conv_selection::subProcess3( int bufferOffset, int sampleFrames )
{
	// get pointers to in/output buffers.
	float* input0	= bufferOffset + pinSignalIn.getBuffer();
	float* output0	= bufferOffset + pinSignalOut.getBuffer();

	for( int s = sampleFrames; s > 0; --s )
	{
		fVec0[IOTA&255] = *input0;
		*output0 = (((0.004334f * fVec0[(IOTA-215)&511]) + ((0.028986f * fVec0[(IOTA-216)&511]) + ((0.030077f * fVec0[(IOTA-217)&511]) + ((0.044618f * fVec0[(IOTA-218)&511]) + ((0.041963f * fVec0[(IOTA-219)&511]) + ((0.033967f * fVec0[(IOTA-220)&511]) + ((0.02295f * fVec0[(IOTA-221)&511]) + ((0.009644f * fVec0[(IOTA-222)&511]) + ((0.00296f * fVec0[(IOTA-237)&511]) + ((0.010712f * fVec0[(IOTA-238)&511]) + ((0.01706f * fVec0[(IOTA-239)&511]) + ((0.022217f * fVec0[(IOTA-240)&511]) + ((0.026215f * fVec0[(IOTA-241)&511]) + ((0.028718f * fVec0[(IOTA-242)&511]) + ((0.029389f * fVec0[(IOTA-243)&511]) + ((0.027924f * fVec0[(IOTA-244)&511]) + ((0.024049f * fVec0[(IOTA-245)&511]) + ((0.018006f * fVec0[(IOTA-246)&511]) + ((0.010895f * fVec0[(IOTA-247)&511]) + ((0.004975f * fVec0[(IOTA-248)&511]) + ((0.002411f * fVec0[(IOTA-249)&511]) + ((0.003784f * fVec0[(IOTA-250)&511]) + ((0.008362f * fVec0[(IOTA-251)&511]) + ((0.014435f * fVec0[(IOTA-252)&511]) + ((0.020417f * fVec0[(IOTA-253)&511]) + ((0.024842f * fVec0[(IOTA-254)&511]) + ((0.026246f * fVec0[(IOTA-255)&511]) + ((0.023713f * fVec0[(IOTA-256)&511]) + ((0.018097f * fVec0[(IOTA-257)&511]) + ((0.011383f * fVec0[(IOTA-258)&511]) + ((0.005799f * fVec0[(IOTA-259)&511]) + ((0.00235f * fVec0[(IOTA-260)&511]) + ((6.1e-005f * fVec0[(IOTA-262)&511]) + (0.000763f * fVec0[(IOTA-261)&511])))))))))))))))))))))))))))))))))) - ((0.047639f * (((((((((fVec0[(IOTA-141)&511] + ((((((((((((((((((((((((((((((((((((((((((((((fVec0[(IOTA-212)&511] + (1.0288419152375154f * fVec0[(IOTA-211)&511])) + (0.8693297508344003f * fVec0[(IOTA-210)&511])) + (0.5637397930267218f * fVec0[(IOTA-209)&511])) + (0.158882428262558f * fVec0[(IOTA-208)&511])) + (0.24150380990365036f * fVec0[(IOTA-198)&511])) + (0.5733537647725603f * fVec0[(IOTA-197)&511])) + (0.8347362455131301f * fVec0[(IOTA-196)&511])) + (1.0038623816620835f * fVec0[(IOTA-195)&511])) + (1.0935368080774155f * fVec0[(IOTA-194)&511])) + (1.14798799303092f * fVec0[(IOTA-193)&511])) + (1.2018094418438674f * fVec0[(IOTA-192)&511])) + (1.2300006297361405f * fVec0[(IOTA-191)&511])) + (1.1672159365225971f * fVec0[(IOTA-190)&511])) + (0.9737400029387686f * fVec0[(IOTA-189)&511])) + (0.6944310333970066f * fVec0[(IOTA-188)&511])) + (0.44075232477591886f * fVec0[(IOTA-187)&511])) + (0.29660572220239717f * fVec0[(IOTA-186)&511])) + (0.2440857280799345f * fVec0[(IOTA-185)&511])) + (0.1889838157811877f * fVec0[(IOTA-184)&511])) + (0.061504229727744074f * fVec0[(IOTA-183)&511])) + (0.13709355779928212f * fVec0[(IOTA-175)&511])) + (0.34016247192426374f * fVec0[(IOTA-174)&511])) + (0.516971388988014f * fVec0[(IOTA-173)&511])) + (0.6290854132118642f * fVec0[(IOTA-172)&511])) + (0.7540040722937089f * fVec0[(IOTA-171)&511])) + (0.996809336887844f * fVec0[(IOTA-170)&511])) + (1.3453053170721465f * fVec0[(IOTA-169)&511])) + (1.6348579945003041f * fVec0[(IOTA-168)&511])) + (1.680996662398455f * fVec0[(IOTA-167)&511])) + (1.4343500073469218f * fVec0[(IOTA-166)&511])) + (1.019227943491677f * fVec0[(IOTA-165)&511])) + (0.5874388631163542f * fVec0[(IOTA-164)&511])) + (0.1909150066122295f * fVec0[(IOTA-163)&511])) + (0.012174898717437394f * fVec0[(IOTA-154)&511])) + (0.44906484183127265f * fVec0[(IOTA-153)&511])) + (0.8468901530258821f * fVec0[(IOTA-152)&511])) + (1.0756103192762232f * fVec0[(IOTA-151)&511])) + (1.0711182014735827f * fVec0[(IOTA-150)&511])) + (0.9026427926698712f * fVec0[(IOTA-149)&511])) + (0.7296752660635194f * fVec0[(IOTA-148)&511])) + (0.661768718906778f * fVec0[(IOTA-147)&511])) + (0.6905896429396082f * fVec0[(IOTA-146)&511])) + (0.7322361930351182f * fVec0[(IOTA-145)&511])) + (0.7379877831188731f * fVec0[(IOTA-144)&511])) + (0.743109637062071f * fVec0[(IOTA-143)&511])) + (0.8219106194504503f * fVec0[(IOTA-142)&511]))) + (1.2101219588992211f * fVec0[(IOTA-140)&511])) + (1.3286383005520688f * fVec0[(IOTA-139)&511])) + (1.2620122168811267f * fVec0[(IOTA-138)&511])) + (0.9891265559730473f * fVec0[(IOTA-137)&511])) + (0.5515648943092845f * fVec0[(IOTA-136)&511])) + (0.030752114863872037f * fVec0[(IOTA-135)&511])) + (0.03780515963811163f * ((((((((((((((((((((((((((((((((((((fVec0[(IOTA-115)&511] + ((((((fVec0[(IOTA-129)&511] + (8.87951138256524f * fVec0[(IOTA-128)&511])) + (14.89505830094392f * fVec0[(IOTA-127)&511])) + (18.504164353137146f * fVec0[(IOTA-126)&511])) + (17.91116046640755f * fVec0[(IOTA-125)&511])) + (11.675180455302609f * fVec0[(IOTA-124)&511])) + (0.7795669072737368f * fVec0[(IOTA-123)&511]))) + (19.94447529150472f * fVec0[(IOTA-114)&511])) + (33.33148250971682f * fVec0[(IOTA-113)&511])) + (37.56801776790672f * fVec0[(IOTA-112)&511])) + (34.73792337590227f * fVec0[(IOTA-111)&511])) + (29.671293725707937f * fVec0[(IOTA-110)&511])) + (25.87562465297057f * fVec0[(IOTA-109)&511])) + (23.16435313714603f * fVec0[(IOTA-108)&511])) + (19.520821765685728f * fVec0[(IOTA-107)&511])) + (13.454747362576345f * fVec0[(IOTA-106)&511])) + (5.049972237645752f * fVec0[(IOTA-105)&511])) + (6.252637423653526f * fVec0[(IOTA-99)&511])) + (19.63964464186563f * fVec0[(IOTA-98)&511])) + (27.129372570794004f * fVec0[(IOTA-97)&511])) + (30.450860632981676f * fVec0[(IOTA-96)&511])) + (34.992226540810655f * fVec0[(IOTA-95)&511])) + (43.803442531926706f * fVec0[(IOTA-94)&511])) + (54.14047751249306f * fVec0[(IOTA-93)&511])) + (60.4269850083287f * fVec0[(IOTA-92)&511])) + (59.64741810105497f * fVec0[(IOTA-91)&511])) + (53.88617434758467f * fVec0[(IOTA-90)&511])) + (47.735147140477515f * fVec0[(IOTA-89)&511])) + (44.07495835646863f * fVec0[(IOTA-88)&511])) + (42.295391449194895f * fVec0[(IOTA-87)&511])) + (40.041643531371456f * fVec0[(IOTA-86)&511])) + (36.279844530816206f * fVec0[(IOTA-85)&511])) + (31.62021099389228f * fVec0[(IOTA-84)&511])) + (26.892282065519154f * fVec0[(IOTA-83)&511])) + (21.656302054414216f * fVec0[(IOTA-82)&511])) + (14.640755136035535f * fVec0[(IOTA-81)&511])) + (5.439200444197668f * fVec0[(IOTA-80)&511])) + (3.1177123820099943f * fVec0[(IOTA-70)&511])) + (33.4164353137146f * fVec0[(IOTA-69)&511])) + (59.34258745141587f * fVec0[(IOTA-68)&511])) + (77.74514158800666f * (((((((((((((((((((fVec0[(IOTA-37)&511] + ((((((((((((((((((fVec0[(IOTA-67)&511] + (1.0867453702711773f * fVec0[(IOTA-66)&511])) + (0.9969504138724029f * fVec0[(IOTA-65)&511])) + (0.7809511566287433f * fVec0[(IOTA-64)&511])) + (0.5581956734443183f * fVec0[(IOTA-63)&511])) + (0.45183153714852986f * fVec0[(IOTA-62)&511])) + (0.49629693113077505f * fVec0[(IOTA-61)&511])) + (0.6253294195787714f * fVec0[(IOTA-60)&511])) + (0.7292938815446475f * fVec0[(IOTA-59)&511])) + (0.7600254251208765f * fVec0[(IOTA-58)&511])) + (0.7467272298759453f * fVec0[(IOTA-57)&511])) + (0.7290724830201615f * fVec0[(IOTA-56)&511])) + (0.6706589819953006f * fVec0[(IOTA-55)&511])) + (0.4638156250223184f * fVec0[(IOTA-54)&511])) + (0.03988744384690649f * fVec0[(IOTA-53)&511])) + (0.20815032245623807f * fVec0[(IOTA-41)&511])) + (0.6846142309258029f * fVec0[(IOTA-40)&511])) + (0.9880087702383247f * fVec0[(IOTA-39)&511])) + (1.0688763667787942f * fVec0[(IOTA-38)&511]))) + (0.9901941879316377f * fVec0[(IOTA-36)&511])) + (1.2641641491511866f * fVec0[(IOTA-35)&511])) + (1.8816446339425361f * fVec0[(IOTA-34)&511])) + (2.6846070890379163f * fVec0[(IOTA-33)&511])) + (3.4400617059113405f * fVec0[(IOTA-32)&511])) + (4.017869003492383f * fVec0[(IOTA-31)&511])) + (4.405402123997458f * fVec0[(IOTA-30)&511])) + (4.549911083495811f * fVec0[(IOTA-29)&511])) + (4.252394317913997f * fVec0[(IOTA-28)&511])) + (3.286618244666795f * fVec0[(IOTA-27)&511])) + (1.6508259593340902f * fVec0[(IOTA-26)&511])) + (1.4640370235468043f * fVec0[(IOTA-12)&511])) + (2.908019625907912f * fVec0[(IOTA-11)&511])) + (3.666081031859962f * fVec0[(IOTA-10)&511])) + (3.4463822766910206f * fVec0[(IOTA-9)&511])) + (2.417829008920218f * fVec0[(IOTA-8)&511])) + (1.0780322670494717f * fVec0[(IOTA-7)&511])) - ((((((((((((((((((((((((((((((0.5472971525292997f * fVec0[(IOTA-52)&511]) + (1.139931009363015f * fVec0[(IOTA-51)&511])) + (1.6098529485284139f * fVec0[(IOTA-50)&511])) + (1.9289453574157793f * fVec0[(IOTA-49)&511])) + (2.1403666645241004f * fVec0[(IOTA-48)&511])) + (2.256536612888251f * fVec0[(IOTA-47)&511])) + (2.2253694141509364f * fVec0[(IOTA-46)&511])) + (1.9845235289496423f * fVec0[(IOTA-45)&511])) + (1.5394482177418778f * fVec0[(IOTA-44)&511])) + (0.9683971461016004f * fVec0[(IOTA-43)&511])) + (0.36312214770852524f * fVec0[(IOTA-42)&511])) + (0.3430677265228291f * fVec0[(IOTA-25)&511])) + (2.2731057927852647f * fVec0[(IOTA-24)&511])) + (3.9006063462815757f * fVec0[(IOTA-23)&511])) + (5.247166455980974f * fVec0[(IOTA-22)&511])) + (6.373363614937972f * fVec0[(IOTA-21)&511])) + (7.141230832958384f * fVec0[(IOTA-20)&511])) + (7.141887886643955f * fVec0[(IOTA-19)&511])) + (6.572358037123533f * fVec0[(IOTA-18)&511])) + (5.308408144608945f * fVec0[(IOTA-17)&511])) + (3.909762246552253f * fVec0[(IOTA-16)&511])) + (2.6649954649011915f * fVec0[(IOTA-15)&511])) + (1.4906262721487797f * fVec0[(IOTA-14)&511])) + (0.1251115919982288f * fVec0[(IOTA-13)&511])) + (0.05318563909183753f * fVec0[(IOTA-6)&511])) + (0.67502267549404f * fVec0[(IOTA-5)&511])) + (0.7700526357137245f * fVec0[(IOTA-4)&511])) + (0.5348702676065391f * fVec0[(IOTA-3)&511])) + (0.23168998493061654f * fVec0[(IOTA-2)&511])) + (0.04119440933016233f * fVec0[(IOTA-1)&511]))))) - (((((((((((((((((((((11.082176568573015f * fVec0[(IOTA-122)&511]) + (20.453081621321488f * fVec0[(IOTA-121)&511])) + (26.367018323153804f * fVec0[(IOTA-120)&511])) + (29.908384230982787f * fVec0[(IOTA-119)&511])) + (31.077734591893392f * fVec0[(IOTA-118)&511])) + (27.58689616879511f * fVec0[(IOTA-117)&511])) + (16.65741254858412f * fVec0[(IOTA-116)&511])) + (4.778456413103831f * fVec0[(IOTA-104)&511])) + (14.268184342032205f * fVec0[(IOTA-103)&511])) + (20.249861188228763f * fVec0[(IOTA-102)&511])) + (18.87729039422543f * fVec0[(IOTA-101)&511])) + (8.84564131038312f * fVec0[(IOTA-100)&511])) + (5.1343697945585784f * fVec0[(IOTA-79)&511])) + (16.96224319822321f * fVec0[(IOTA-78)&511])) + (31.365907828983897f * fVec0[(IOTA-77)&511])) + (49.2093281510272f * fVec0[(IOTA-76)&511])) + (67.22209883398112f * fVec0[(IOTA-75)&511])) + (78.15158245419211f * fVec0[(IOTA-74)&511])) + (75.22043309272627f * fVec0[(IOTA-73)&511])) + (57.08883953359245f * fVec0[(IOTA-72)&511])) + (28.688506385341476f * fVec0[(IOTA-71)&511]))))) - (((((((((((((((((((((((((((((0.29788618568819664f * fVec0[(IOTA-207)&511]) + (0.7514431453221101f * fVec0[(IOTA-206)&511])) + (1.1377442851445243f * fVec0[(IOTA-205)&511])) + (1.3798988223934172f * fVec0[(IOTA-204)&511])) + (1.4234555721152835f * fVec0[(IOTA-203)&511])) + (1.2601020172547703f * fVec0[(IOTA-202)&511])) + (0.9417074245890972f * fVec0[(IOTA-201)&511])) + (0.5458133042255295f * fVec0[(IOTA-200)&511])) + (0.1390247486303239f * fVec0[(IOTA-199)&511])) + (0.11018283339280842f * fVec0[(IOTA-182)&511])) + (0.22869917504565587f * fVec0[(IOTA-181)&511])) + (0.23191082936249713f * fVec0[(IOTA-180)&511])) + (0.15823170091731564f * fVec0[(IOTA-179)&511])) + (0.09032515376057433f * fVec0[(IOTA-178)&511])) + (0.05894330275614518f * fVec0[(IOTA-177)&511])) + (0.00384139045739835f * fVec0[(IOTA-176)&511])) + (0.2274187115598564f * fVec0[(IOTA-162)&511])) + (0.7027645416570457f * fVec0[(IOTA-161)&511])) + (1.153109846974118f * fVec0[(IOTA-160)&511])) + (1.4202649090031276f * fVec0[(IOTA-159)&511])) + (1.4055290833140914f * fVec0[(IOTA-158)&511])) + (1.1511996473477613f * fVec0[(IOTA-157)&511])) + (0.7866873779886229f * fVec0[(IOTA-156)&511])) + (0.39654484770881004f * fVec0[(IOTA-155)&511])) + (0.4599592770629107f * fVec0[(IOTA-134)&511])) + (0.7885975776149793f * fVec0[(IOTA-133)&511])) + (0.8558743886311635f * fVec0[(IOTA-132)&511])) + (0.6636789185331345f * fVec0[(IOTA-131)&511])) + (0.320955519637272f * fVec0[(IOTA-130)&511])))) + ((0.036836f * fVec0[(IOTA-213)&511]) + ((0.018128f * fVec0[(IOTA-214)&511]) + ((0.006348f * fVec0[(IOTA-223)&511]) + ((0.024934f * fVec0[(IOTA-224)&511]) + ((0.04413f * fVec0[(IOTA-225)&511]) + ((0.061068f * fVec0[(IOTA-226)&511]) + ((0.072787f * fVec0[(IOTA-227)&511]) + ((0.077914f * fVec0[(IOTA-228)&511]) + ((0.076785f * fVec0[(IOTA-229)&511]) + ((0.070864f * fVec0[(IOTA-230)&511]) + ((0.062014f * fVec0[(IOTA-231)&511]) + ((0.051607f * fVec0[(IOTA-232)&511]) + ((0.040437f * fVec0[(IOTA-233)&511]) + ((0.02884f * fVec0[(IOTA-234)&511]) + ((0.006439f * fVec0[(IOTA-236)&511]) + (0.017273f * fVec0[(IOTA-235)&511]))))))))))))))))));

		// post processing
		IOTA = IOTA+1;

		// Increment buffer pointers.
		++input0;
		++output0;
	}
}

void conv_selection::onSetPins(void)
{
	bool OutputIsActive = pinSignalIn.isStreaming();
	
	// Set state of output audio pins.
	pinSignalOut.setStreaming( OutputIsActive );

	// Set processing method.
	switch( pinCoeffSel )
	{
	case 1:
		SET_PROCESS(&conv_selection::subProcess1);
		break;

	case 2:
		SET_PROCESS(&conv_selection::subProcess2);
		break;

	case 3:
		SET_PROCESS(&conv_selection::subProcess3);
		break;
	}

	// Set sleep mode (optional).
	// setSleep(false);
	setSleep( !OutputIsActive );
}
